<!doctype html>
<html lang="hy">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#faf8f4" />
  <title>Սուրբ Մկրտություն — Աշոտ և Ալեքս</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Armenian:wght@300;400;600;700&family=Noto+Serif+Armenian:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --ink:#2a2a2a;
      --muted:#646464;
      --primary:#5b7698;
      --paper:#ffffffee;
      --bg:#faf8f4;
      --radius:22px;
      --shadow:0 14px 44px rgba(0,0,0,.10);
      --maxw:980px;
      --hero-offset: 220px;
      --ok:#0a7e3d;
      --warn:#c84a3a;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family:"Noto Sans Armenian", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--ink);
      background:var(--bg);
      line-height:1.55;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* BG */
    .bg{
      position:fixed; inset:0; z-index:-3;
      background:url("assets/bg_flower.png") center/cover no-repeat fixed;
      filter:brightness(1.02) contrast(.98);
      will-change:transform;
    }
    @media (max-width: 768px){
      .bg{ position:absolute; background-attachment:scroll; }
    }

    /* Audio */
    .audio-toggle{
      position:fixed; right:16px; top:calc(12px + env(safe-area-inset-top));
      z-index:10;
      display:flex; align-items:center; justify-content:center;
      width:46px; height:46px;
      border-radius:999px;
      background:#ffffffd8; border:1px solid #e7e7e7; box-shadow:var(--shadow);
      cursor:pointer; user-select:none; -webkit-tap-highlight-color:transparent;
      backdrop-filter:saturate(110%) blur(2px);
    }
    .eq{ width:20px; height:16px; display:inline-grid; grid-auto-flow:column; gap:3px; align-items:end; }
    .bar{ width:3px; height:6px; background:#5b7698; border-radius:2px; animation:pause 1s linear infinite; }
    .audio-on .bar:nth-child(1){animation:updown .9s ease-in-out infinite}
    .audio-on .bar:nth-child(2){animation:updown 1.1s ease-in-out infinite .1s}
    .audio-on .bar:nth-child(3){animation:updown .95s ease-in-out infinite .2s}
    @keyframes updown{0%,100%{height:6px}50%{height:16px}}
    @keyframes pause{to{height:6px}}
    @media (max-width:480px){
      .audio-toggle{ right:12px; width:44px; height:44px }
      .eq{ width:18px; height:14px }
    }

    /* HERO */
    header.hero{
      min-height:92svh;
      padding:calc(var(--hero-offset) + env(safe-area-inset-top)) 16px 56px;
      display:grid; place-items:start center;
    }
    .hero-inner{ width:min(640px, 82vw); margin:0 auto; }
    @media (max-width:1024px){ .hero-inner{ width:min(560px, 84vw) } }
    @media (max-width:768px){  .hero-inner{ width:min(520px, 88vw) } }
    @media (max-width:480px){  .hero-inner{ width:min(480px, 90vw) } }

    .card{
      background:var(--paper);
      border-radius:20px;
      box-shadow:var(--shadow);
      padding:24px 22px 28px;
      text-align:center;
      border:1px solid rgba(0,0,0,.06);
      backdrop-filter: blur(2px);
    }

    .subtitle{
      font-family:"Noto Serif Armenian", serif;
      font-size:clamp(16px,2.1vw,19px);
      color:var(--muted);
      margin:2px 0 8px;
    }
    h1.names{
      font-family:"Noto Serif Armenian", serif !important;
      font-weight:700;
      font-size:clamp(34px,4.6vw,50px);
      letter-spacing:.01em;
      margin:2px 0 8px;
      color:#5b7698;
    }
    .date{
      font-weight:800;
      letter-spacing:.16em;
      font-size:clamp(18px,2.6vw,22px);
      margin:4px 0 8px;
    }

    /* Countdown */
    .countdown{
      margin-top:10px;
      display:flex; gap:10px; justify-content:center; flex-wrap:nowrap;
      font-variant-numeric:tabular-nums;
      overflow:hidden;
    }
    .cd-box{
      background:#fff; border:1px solid #e9edf3; border-radius:14px;
      width:92px; padding:10px 8px;
      box-shadow:0 8px 22px rgba(111,134,166,.10);
    }
    .cd-box b{display:block; font-size:24px; line-height:1}
    .cd-box span{display:block; margin-top:4px; font-size:12px; color:#8a8a8a; letter-spacing:.06em}
    @media (max-width:480px){
      .countdown{ gap:8px }
      .cd-box{ width:72px; padding:8px 6px; border-radius:12px }
      .cd-box b{ font-size:20px }
      .cd-box span{ font-size:10px }
    }

    .chevron{ margin-top:12px; width:22px; height:22px; opacity:.7; animation:bounce 1.8s infinite; cursor:pointer }
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(5px)}}
    @media (prefers-reduced-motion:reduce){ .chevron{ animation:none } .audio-toggle, .btn{ transition:none } }

    /* Sections */
    section{
      padding:68px 16px;
      background: linear-gradient(180deg, #f0f7fb 0%, #ffffff 100%);
    }
    .wrap{max-width:var(--maxw); margin:0 auto}
    .sec-title{ font-family:"Noto Serif Armenian", serif; text-align:center; margin:0 0 8px; font-size:clamp(26px,3.2vw,34px) }
    .time{ text-align:center; font-weight:800; font-size:clamp(22px,2.8vw,26px); margin:10px 0 8px }
    .desc{ text-align:center; color:#6f6f6f; margin:0 0 22px; font-size:clamp(16px,2vw,18px) }
    @media (max-width:480px){ section{ padding:58px 14px } }

    .emblem{
      width:min(220px,55vw); max-height:180px; object-fit:contain;
      display:block; margin:0 auto 14px; filter:drop-shadow(0 2px 10px rgba(0,0,0,.06))
    }

    .btn{
      display:inline-block; background:#6f86a6; color:#fff; text-decoration:none; font-weight:700;
      padding:14px 22px; border-radius:999px; border:1px solid rgba(0,0,0,.06);
      box-shadow:0 10px 24px rgba(111,134,166,.22);
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .btn:hover{transform:translateY(-2px); box-shadow:0 16px 30px rgba(111,134,166,.28)}
    @media (max-width:480px){ .btn{ padding:12px 18px; font-size:14px } }

    /* RSVP box */
    .rsvp{
      width:min(720px, 92vw); background:#fff; border:1px solid #ececec; border-radius:16px; box-shadow:var(--shadow); margin:24px auto 0; padding:18px
    }
    .r-line{height:1px; background:#e9e9e9; margin:14px 0 10px}
    .field{margin:10px 0}
    label{display:block; margin:4px 0 8px; font-weight:700}
    input[type="text"], input[type="tel"]{
      width:100%; border:1px solid #e4e4e4; border-radius:12px; padding:12px 14px; font-size:16px; outline:none
    }
    input[type="text"]:focus, input[type="tel"]:focus{ border-color:#cbd7e7; box-shadow:0 0 0 4px rgba(203,215,231,.3) }
    .radio{display:flex; gap:18px; align-items:center; flex-wrap:wrap}
    .submit-row{display:flex; justify-content:center; margin-top:14px}

    /* banners */
    .banner{
      width:min(720px, 92vw); margin:12px auto 0; padding:12px 14px; border-radius:12px; border:1px solid transparent; text-align:center; font-weight:600
    }
    .banner.ok{ background:#eaf6ee; border-color:#cfe9d8; color:var(--ok) }
    .banner.warn{ background:#fff1ef; border-color:#ffd9d3; color:var(--warn) }

    footer{
      padding:46px 16px 80px;
      text-align:center;
      color:#817c72;
      font-family:"Noto Serif Armenian", serif;
      background: linear-gradient(180deg, #f0f7fb 0%, #ffffff 100%);
    }
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>

  <!-- Audio -->
  <button id="audioBtn" class="audio-toggle" type="button" aria-pressed="false" aria-label="Թողարկել/կանգնեցնել երաժշտությունը">
    <div class="eq"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
  </button>
  <audio id="bgm" src="assets/music.mp3" preload="auto" loop></audio>

  <!-- HERO -->
  <header class="hero" id="home">
    <div class="hero-inner">
      <div class="card">
        <div class="subtitle">Հարգելի հյուրեր սիրով հրավիրում ենք ձեզ մեր որդիների մկրտությանը</div>
        <h1 class="names">Աշոտ և Ալեքս</h1>
        <div class="date">18․10․25</div>

        <div class="countdown" id="countdown">
          <div class="cd-box"><b>—</b><span>ՕՐ</span></div>
          <div class="cd-box"><b>—</b><span>ԺԱՄ</span></div>
          <div class="cd-box"><b>—</b><span>ՐՈՊԵ</span></div>
          <div class="cd-box"><b>—</b><span>ՎԱՐԿ</span></div>
        </div>

        <!-- fixed chevron path -->
        <svg class="chevron" id="toCeremony" viewBox="0 0 24 24" aria-label="Սքրոլ դեպի արարողություն" role="button" tabindex="0">
          <path d="M6.7 8.7a1 1 0 0 1 1.4 0L12 12.6l3.9-3.9a1 1 0 1 1 1.4 1.4l-4.6 4.6a1 1 0 0 1-1.4 0L6.7 10.1a1 1 0 0 1 0-1.4z" fill="#6a6a6a"/>
        </svg>
      </div>
    </div>
  </header>

  <!-- Ceremony -->
  <section id="ceremony">
    <div class="wrap">
      <img class="emblem" src="assets/church_sketch.png" alt="Եկեղեցու գծանկար" loading="lazy" decoding="async">
      <h2 class="sec-title">Մկրտության արարողություն</h2>
      <div class="time">Ժամը՝ 16:30</div>
      <p class="desc">Սպասում ենք ձեզ <b>Ք․ Արտաշատ Սուրբ Հովհաննես</b> եկեղեցում</p>
      <p style="text-align:center">
        <a class="btn" href="https://www.google.com/maps/place/Saint+Hovhannes+Church/@39.9592149,44.5344554,675m/data=!3m2!1e3!4b1!4m6!3m5!1s0x406acb973112bcd5:0x134f6d194ddf4d79!8m2!3d39.9592149!4d44.5344554!16s%2Fg%2F11shcvgk3c?entry=ttu&g_ep=EgoyMDI1MDkyMi4wIKXMDSoASAFQAw%3D%3D"_blank" rel="noopener">Քարտեզ</a>
      </p>
    </div>
  </section>

  <!-- Reception -->
  <section id="reception">
    <div class="wrap">
      <img class="emblem" src="assets/hall_sketch.png" alt="Սրահի գծանկար" loading="lazy" decoding="async">
      <h2 class="sec-title">Հյուրասիրություն</h2>
      <div class="time">Ժամը՝ 18:00</div>
      <p class="desc">Շարունակությունը՝ <b>Ք․ Արտաշատ Artashat Eco Garden</b> հանդիսությունների սրահում</p>
      <p style="text-align:center">
        <a class="btn" href="https://www.google.com/maps/place/%D4%B1%D6%80%D5%BF%D5%B7%D5%A1%D5%BF+%D5%A7%D5%AF%D5%B8+%D5%A3%D5%A1%D6%80%D5%A4%D5%A5%D5%B6/@39.9562463,44.5375191,675m/data=!3m2!1e3!4b1!4m6!3m5!1s0x406acd1d3be65711:0xa323868555d83638!8m2!3d39.9562463!4d44.5375191!16s%2Fg%2F11t187c8d1?entry=ttu&g_ep=EgoyMDI1MDkyMi4wIKXMDSoASAFQAw%3D%3D" target="_blank" rel="noopener">Քարտեզ</a>
      </p>
    </div>
  </section>

  <!-- RSVP -->
  <section id="rsvp">
    <div class="wrap">
      <h2 class="sec-title">Հրավիրվում եք մեր ընտանեկան տոնին</h2>
      <p class="desc">Խնդրում ենք հաստատել ձեր ներկայությունը մինչև հոկտեմբերի 10-ը</p>

      <!-- success / error banners (appear after redirect or client check) -->
      <div id="sentBanner" class="banner ok" style="display:none">✅ Շնորհակալ ենք՝ ձեր պատասխանը առաքվեց։ Կտեսնենք էլ․ փոստում։</div>
      <div id="warnBanner" class="banner warn" style="display:none">⚠️ Խնդրում ենք լրացնել բոլոր դաշտերը ճիշտ ձևաչափով։</div>

      <!-- REAL submission via FormSubmit -->
      <form id="rsvpForm" class="rsvp" method="POST" target="_self">
        <!-- (1) սա կփոխեք՝ ձեր էլ. հասցեով -->
        <!-- example: const RECIPIENT_EMAIL = "amelise.invite@example.com" -->
        <input type="hidden" name="_subject" value="RSVP • Աշոտ և Ալեքս">
        <input type="hidden" name="_template" value="table">
        <input type="hidden" name="_captcha" value="true">
        <input type="hidden" id="nextUrl" name="_next" value="">
        <input type="text" name="_honey" style="display:none">

        <div class="field">
          <label for="name">Ձեր անուն, ազգանուն</label>
          <input id="name" type="text" name="Անուն Ազգանուն" placeholder="օր.՝ Աննա Կարապետյան" required>
        </div>
        <div class="field">
          <label for="phone">Հյուրերի քանակ</label>
          <input id="phone" type="tel" name="Հյուրերի քանակ" inputmode="numeric" pattern="[0-9]{1,3}" placeholder="օր․՝ 5" required>
        </div>

        <div class="r-line"></div>

        <div class="field">
          <span style="display:block; font-weight:700; margin:4px 0 6px">Կկարողանա՞ք ներկա լինել</span>
          <div class="radio">
            <label><input type="radio" name="Մասնակցություն" value="Այո, կմասնակցեմ" required> Այո, կմասնակցեմ</label>
            <label><input type="radio" name="Մասնակցություն" value="Ցավոք, ոչ"> Ցավոք, ոչ</label>
          </div>
        </div>

        <div class="submit-row">
          <button class="btn" type="submit">Ուղարկել</button>
        </div>
      </form>
    </div>
  </section>

  <footer>
    <div class="wrap">
      <p>Սիրով, <b>Հովհաննես և Լիլիթ Սարգսյաններ</b></p>
      <p style="margin-top:6px; font-size:14px">
        Amelise Invite • © 2025
        <!-- Օգտակար իրական հղումներ (ցանկության դեպքում) -->
        • <a href="tel:+37400000000" class="link" style="color:#5b7698">Զանգ</a>
        • <a href="https://wa.me/37400000000" target="_blank" rel="noopener" class="link" style="color:#5b7698">WhatsApp</a>
        • <a href="https://instagram.com/amelise.invite" target="_blank" rel="noopener" class="link" style="color:#5b7698">Instagram</a>
      </p>
    </div>
  </footer>

  <script>
    /* ===================== CONFIG ===================== */
    // Փոխեք ԱՅՍ տողը ձեր էլ․ հասցեով (օր. "amelise.invite@gmail.com")
    const RECIPIENT_EMAIL = "arman.ayvazyan.03@list.ru";
    /* ================================================= */

    // Build FormSubmit endpoint dynamically
    const form = document.getElementById('rsvpForm');
    form.action = "https://formsubmit.co/" + encodeURIComponent(RECIPIENT_EMAIL);

    // Set _next to return back with success flag
    const next = document.getElementById('nextUrl');
    const here = location.origin + location.pathname + "?sent=1#rsvp";
    next.value = here;

    // Show success banner if redirected back with ?sent=1
    const params = new URLSearchParams(location.search);
    if (params.get("sent") === "1") {
      document.getElementById('sentBanner').style.display = "block";
      // Scroll into RSVP
      setTimeout(()=> document.getElementById('rsvp').scrollIntoView({behavior:'smooth', block:'start'}), 150);
      // Remove the query from URL for cleanliness
      history.replaceState({}, "", location.pathname + "#rsvp");
    }

    // Client-side minimal validation
    form.addEventListener('submit', (e)=>{
      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      if(!name || !phone){
        e.preventDefault();
        document.getElementById('warnBanner').style.display = "block";
        setTimeout(()=> document.getElementById('warnBanner').style.display="none", 3000);
      }
    });

    // Countdown -> 2025-10-18 16:30 (+04:00)
    const target = new Date("2025-10-18T16:30:00+04:00").getTime();
    const boxes = document.querySelectorAll('#countdown .cd-box b');
    function tick(){
      const now = Date.now();
      let diff = Math.max(0, target - now);
      const d = Math.floor(diff / 86400000); diff -= d*86400000;
      const h = Math.floor(diff / 3600000);  diff -= h*3600000;
      const m = Math.floor(diff / 60000);    diff -= m*60000;
      const s = Math.floor(diff / 1000);
      boxes[0].textContent = d;
      boxes[1].textContent = String(h).padStart(2,'0');
      boxes[2].textContent = String(m).padStart(2,'0');
      boxes[3].textContent = String(s).padStart(2,'0');
    }
    tick(); setInterval(tick, 1000);

    // Smooth scroll
    const chev = document.getElementById('toCeremony');
    const go = () => document.getElementById('ceremony')?.scrollIntoView({behavior:'smooth', block:'start'});
    chev?.addEventListener('click', go);
    chev?.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') go(); });

    // Audio control
    const audio = document.getElementById('bgm');
    const btn = document.getElementById('audioBtn');
    async function playAudio(){
      try{ await audio.play(); btn.classList.add('audio-on'); btn.setAttribute('aria-pressed','true'); }
      catch(e){ /* gesture needed */ }
    }
    function pauseAudio(){
      audio.pause(); btn.classList.remove('audio-on'); btn.setAttribute('aria-pressed','false');
    }
    btn.addEventListener('click', async () => { if(audio.paused){ await playAudio(); } else { pauseAudio(); } });

    // Auto-prime on first interaction (mobile-friendly)
    const prime = () => {
      playAudio();
      window.removeEventListener('pointerdown', prime);
      window.removeEventListener('keydown', prime);
      window.removeEventListener('scroll', prime);
    };
    window.addEventListener('pointerdown', prime, {once:true});
    window.addEventListener('keydown', prime, {once:true});
    window.addEventListener('scroll', prime, {once:true});
    document.addEventListener('visibilitychange', ()=>{ if(document.hidden) pauseAudio(); });
  </script>
</body>
</html>
